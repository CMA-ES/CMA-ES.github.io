<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>cma.utilities.utils</title>
    <meta name="generator" content="pydoctor 22.2.2"> 
        
    </meta>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta content="width=device-width, initial-scale=0.75" name="viewport" />
    <link href="bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="apidocs.css" rel="stylesheet" type="text/css" />
    <link href="extra.css" rel="stylesheet" type="text/css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            cma <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="index.html" class="internal-link">cma</a></code><wbr></wbr>.<code><a href="cma.utilities.html" class="internal-link" title="cma.utilities">utilities</a></code><wbr></wbr>.<code><a href="cma.utilities.utils.html" class="internal-link" title="cma.utilities.utils">utils</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div>various utilities not related to optimization</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id536">
  
  
  <tr class="class">
    
    <td>Class</td>
    <td><code><a href="cma.utilities.utils.BlancClass.html" class="internal-link" title="cma.utilities.utils.BlancClass">​Blanc​Class</a></code></td>
    <td>blanc container class to have a collection of attributes.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="cma.utilities.utils.DataDict.html" class="internal-link" title="cma.utilities.utils.DataDict">​Data​Dict</a></code></td>
    <td>a dictionary of lists (of data)</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="cma.utilities.utils.DefaultSettings.html" class="internal-link" title="cma.utilities.utils.DefaultSettings">​Default​Settings</a></code></td>
    <td>resembling somewhat <code>types.SimpleNamespace</code> from Python &gt;=3.3 but with instantiation and resembling even more the <code>dataclass</code> decorator from Python &gt;=3.7.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="cma.utilities.utils.DerivedDictBase.html" class="internal-link" title="cma.utilities.utils.DerivedDictBase">​Derived​Dict​Base</a></code></td>
    <td>for conveniently adding methods/functionality to a dictionary.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="cma.utilities.utils.DictClass.html" class="internal-link" title="cma.utilities.utils.DictClass">​Dict​Class</a></code></td>
    <td>A class wrapped over <code>dict</code> to use class .-notation.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="cma.utilities.utils.DictFromTagsInString.html" class="internal-link" title="cma.utilities.utils.DictFromTagsInString">​Dict​From​Tags​In​String</a></code></td>
    <td>read from a string or file all key-value pairs within all <tt class="rst-docutils literal"><span class="pre">&lt;python&gt;...&lt;/python&gt;</span></tt> tags and return a <code>dict</code>.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="cma.utilities.utils.ElapsedWCTime.html" class="internal-link" title="cma.utilities.utils.ElapsedWCTime">​Elapsed​WCTime</a></code></td>
    <td>measure elapsed cumulative time while not paused and elapsed time since last tic.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="cma.utilities.utils.ExclusionListOfVectors.html" class="internal-link" title="cma.utilities.utils.ExclusionListOfVectors">​Exclusion​List​Of​Vectors</a></code></td>
    <td>For delayed selective mirrored sampling</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="cma.utilities.utils.ListOfCallables.html" class="internal-link" title="cma.utilities.utils.ListOfCallables">​List​Of​Callables</a></code></td>
    <td>A <code>list</code> of callables that can be called like a single <code>callable</code>.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="cma.utilities.utils.MoreToWrite.html" class="internal-link" title="cma.utilities.utils.MoreToWrite">​More​To​Write</a></code></td>
    <td>make sure that this list does not grow unbounded</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="cma.utilities.utils.SolutionDict.html" class="internal-link" title="cma.utilities.utils.SolutionDict">​Solution​Dict</a></code></td>
    <td>dictionary with computation of an hash key.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="cma.utilities.utils.TimingWrapper.html" class="internal-link" title="cma.utilities.utils.TimingWrapper">​Timing​Wrapper</a></code></td>
    <td>wrap a timer around a callable.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#argsort" class="internal-link" title="cma.utilities.utils.argsort">argsort</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#as_vector_list" class="internal-link" title="cma.utilities.utils.as_vector_list">as​_vector​_list</a></code></td>
    <td>a tool to handle a vector or a list of vectors in the same way, return a list of vectors and a function to revert the "list making".</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#download_file" class="internal-link" title="cma.utilities.utils.download_file">download​_file</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#extract_targz" class="internal-link" title="cma.utilities.utils.extract_targz">extract​_targz</a></code></td>
    <td>filename must be a valid path in the tar</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#is_" class="internal-link" title="cma.utilities.utils.is_">is​_</a></code></td>
    <td>intuitive handling of variable truth value also for <code>numpy</code> arrays.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#is_all" class="internal-link" title="cma.utilities.utils.is_all">is​_all</a></code></td>
    <td>return <tt class="rst-docutils literal">all(is_(v) for v in var_list)</tt></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#is_any" class="internal-link" title="cma.utilities.utils.is_any">is​_any</a></code></td>
    <td>return <tt class="rst-docutils literal">any(is_(v) for v in var_list)</tt></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#is_nan" class="internal-link" title="cma.utilities.utils.is_nan">is​_nan</a></code></td>
    <td>return <tt class="rst-docutils literal">np.isnan(var)</tt> or <code>False</code> if <code>var</code> is not numeric</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#is_not" class="internal-link" title="cma.utilities.utils.is_not">is​_not</a></code></td>
    <td>see <code><a href="#is_" class="internal-link" title="cma.utilities.utils.is_">is_</a></code></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#is_one" class="internal-link" title="cma.utilities.utils.is_one">is​_one</a></code></td>
    <td>return True if var == 1 or ones vector</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#is_str" class="internal-link" title="cma.utilities.utils.is_str">is​_str</a></code></td>
    <td><code>bytes</code> (in Python 3) also fit the bill.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#is_vector_list" class="internal-link" title="cma.utilities.utils.is_vector_list">is​_vector​_list</a></code></td>
    <td>make an educated guess whether <tt class="rst-docutils literal">x</tt> is a list of vectors.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#num2str" class="internal-link" title="cma.utilities.utils.num2str">num2str</a></code></td>
    <td>returns the shortest string representation.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#pprint" class="internal-link" title="cma.utilities.utils.pprint">pprint</a></code></td>
    <td>nicely formated print</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#print_message" class="internal-link" title="cma.utilities.utils.print_message">print​_message</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#print_warning" class="internal-link" title="cma.utilities.utils.print_warning">print​_warning</a></code></td>
    <td>Poor man's maxwarns: warn only if <tt class="rst-docutils literal"><span class="pre">iteration&lt;=maxwarns</span></tt></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#ranks" class="internal-link" title="cma.utilities.utils.ranks">ranks</a></code></td>
    <td>return ranks of entries starting with zero based on Pythons <code>sorted</code>.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#recycled" class="internal-link" title="cma.utilities.utils.recycled">recycled</a></code></td>
    <td>return <tt class="rst-docutils literal">vec</tt> with the last element recycled to <tt class="rst-docutils literal">dim</tt> if <tt class="rst-docutils literal">len(vec)</tt> doesn't fail, else <tt class="rst-docutils literal">vec</tt>.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#rglen" class="internal-link" title="cma.utilities.utils.rglen">rglen</a></code></td>
    <td>return generator <tt class="rst-docutils literal"><span class="pre">range(len(.))</span></tt> with shortcut <tt class="rst-docutils literal"><span class="pre">rglen(.)</span></tt></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#set_attributes_from_dict" class="internal-link" title="cma.utilities.utils.set_attributes_from_dict">set​_attributes​_from​_dict</a></code></td>
    <td>assign, for example, all arguments given to an <tt class="rst-docutils literal">__init__</tt> method to attributes in <tt class="rst-docutils literal">self</tt> or <tt class="rst-docutils literal">self.params</tt> or <tt class="rst-docutils literal">self.args</tt>.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#seval" class="internal-link" title="cma.utilities.utils.seval">seval</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#zero_values_indices" class="internal-link" title="cma.utilities.utils.zero_values_indices">zero​_values​_indices</a></code></td>
    <td>generate increasing index pairs <tt class="rst-docutils literal">(i, j)</tt> with <tt class="rst-docutils literal">all(diffs[i:j] == 0)</tt></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#PY2" class="internal-link" title="cma.utilities.utils.PY2">PY2</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#global_verbosity" class="internal-link" title="cma.utilities.utils.global_verbosity">global​_verbosity</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basefunction">
  
  
  <a name="cma.utilities.utils.argsort">
    
  </a>
  <a name="argsort">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">argsort</span>(a, reverse=False):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>return index list to get <code>a</code> in order, ie
<tt class="rst-docutils literal"><span class="pre">a[argsort(a)[i]]</span> == <span class="pre">sorted(a)[i]</span></tt>, which leads to unexpected
results with <code>np.nan</code> entries, because any comparison with <code>np.nan</code>
is <code>False</code>.</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.as_vector_list">
    
  </a>
  <a name="as_vector_list">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">as_vector_list</span>(X):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>a tool to handle a vector or a list of vectors in the same way,
return a list of vectors and a function to revert the "list making".</p>
<p>Useful when we might either have a single solution vector or a
set/list/population of vectors to deal with.</p>
<p>Namely, this function allows to replace a slightly more verbose:</p>
<pre class="rst-literal-block">
was_list = utils.is_vector_list(X)
X = X if was_list else [X]
# work work work on X, e.g.
res = [x[0] + 1 for x in X]
res = res if was_list else res[0]
</pre>
<p>with:</p>
<pre class="rst-literal-block">
X, revert = utils.as_vector_list(X)
# work work work on X, e.g.
res = [x[0] + 2 for x in X]
res, ... = revert(res, ...)  # also allows to revert X, if desired
</pre>
<p>Testing:</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> cma.utilities <span class="py-keyword">import</span> utils
<span class="py-prompt">&gt;&gt;&gt; </span>X = [3]  <span class="py-comment"># a single vector</span>
<span class="py-prompt">&gt;&gt;&gt; </span>X, revert_vlist = utils.as_vector_list(X)  <span class="py-comment"># BEGIN</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">assert</span> X == [[3]]  <span class="py-comment"># a list with one element</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-comment"># work work work on X as a list of vectors, e.g.</span>
<span class="py-prompt">&gt;&gt;&gt; </span>res = [x[0] + 1 <span class="py-keyword">for</span> x <span class="py-keyword">in</span> X]
<span class="py-prompt">&gt;&gt;&gt; </span>X, res = revert_vlist(X, res)  <span class="py-comment"># END</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">assert</span> res == 4
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">assert</span> X[0] == 3</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.download_file">
    
  </a>
  <a name="download_file">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">download_file</span>(url, target_dir=<span class="rst-variable-quote">'</span><span class="rst-variable-string">.</span><span class="rst-variable-quote">'</span>, target_name=None):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.extract_targz">
    
  </a>
  <a name="extract_targz">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">extract_targz</span>(tarname, filename=None, target_dir=<span class="rst-variable-quote">'</span><span class="rst-variable-string">.</span><span class="rst-variable-quote">'</span>):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>filename must be a valid path in the tar</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.is_">
    
  </a>
  <a name="is_">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">is_</span>(var):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>intuitive handling of variable truth value also for <code>numpy</code> arrays.</p>
<p>Return <code>True</code> for any non-empty container, otherwise the truth value of the
scalar <code>var</code>.</p>
<p>Caveat of the most unintuitive case: [0] evaluates to True, like [0, 0].</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">import</span> numpy <span class="py-keyword">as</span> np
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> cma.utilities.utils <span class="py-keyword">import</span> is_
<span class="py-prompt">&gt;&gt;&gt; </span>is_({}) <span class="py-keyword">or</span> is_(()) <span class="py-keyword">or</span> is_(0) <span class="py-keyword">or</span> is_(<span class="py-builtin">None</span>) <span class="py-keyword">or</span> is_(np.array(0))
<span class="py-output">False</span>
<span class="py-prompt">&gt;&gt;&gt; </span>is_({0:0}) <span class="py-keyword">and</span> is_((0,)) <span class="py-keyword">and</span> is_(np.array([0]))
<span class="py-output">True</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.is_all">
    
  </a>
  <a name="is_all">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">is_all</span>(var_list):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>return <tt class="rst-docutils literal">all(is_(v) for v in var_list)</tt></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.is_any">
    
  </a>
  <a name="is_any">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">is_any</span>(var_list):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>return <tt class="rst-docutils literal">any(is_(v) for v in var_list)</tt></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.is_nan">
    
  </a>
  <a name="is_nan">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">is_nan</span>(var):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>return <tt class="rst-docutils literal">np.isnan(var)</tt> or <code>False</code> if <code>var</code> is not numeric</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.is_not">
    
  </a>
  <a name="is_not">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">is_not</span>(var):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>see <code><a href="#is_" class="internal-link" title="cma.utilities.utils.is_">is_</a></code></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.is_one">
    
  </a>
  <a name="is_one">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">is_one</span>(var):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>return True if var == 1 or ones vector</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.is_str">
    
  </a>
  <a name="is_str">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">is_str</span>(var):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p><code>bytes</code> (in Python 3) also fit the bill.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> cma.utilities.utils <span class="py-keyword">import</span> is_str
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">assert</span> is_str(b<span class="py-string">'a'</span>) * is_str(<span class="py-string">'a'</span>) * is_str(u<span class="py-string">'a'</span>) * is_str(r<span class="py-string">'b'</span>)
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">assert</span> <span class="py-keyword">not</span> is_str([1]) <span class="py-keyword">and</span> <span class="py-keyword">not</span> is_str(1)</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.is_vector_list">
    
  </a>
  <a name="is_vector_list">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">is_vector_list</span>(x):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>make an educated guess whether <tt class="rst-docutils literal">x</tt> is a list of vectors.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> cma.utilities.utils <span class="py-keyword">import</span> is_vector_list <span class="py-keyword">as</span> ivl
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">assert</span> ivl([[0], [0]]) <span class="py-keyword">and</span> <span class="py-keyword">not</span> ivl([1,2,3])</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.num2str">
    
  </a>
  <a name="num2str">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">num2str</span>(val, significant_digits=2, force_rounding=False, max_predecimal_digits=5, max_postdecimal_leading_zeros=1, remove_trailing_zeros=True, desired_length=None):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>returns the shortest string representation.</p>
<p>Generally, display either <tt class="rst-docutils literal">significant_digits</tt> digits or its true
value, whichever is shorter.</p>
<p><tt class="rst-docutils literal">force_rounding</tt> shows no more than the desired number of significant
digits, which means, e.g., <tt class="rst-docutils literal">12345</tt>  becomes <tt class="rst-docutils literal">12000</tt>.</p>
<p><tt class="rst-docutils literal">remove_trailing_zeros</tt> removes zeros, if and only if the value is
exactly.</p>
<p><tt class="rst-docutils literal">desired_length</tt> adds digits up to the desired length.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> cma.utilities <span class="py-keyword">import</span> utils
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-builtin">print</span>([utils.num2str(val) <span class="py-keyword">for</span> val <span class="py-keyword">in</span> [12345, 1234.5, 123.45,
<span class="py-more">... </span>      12.345, 1.2345, .12345, .012345, .0012345]])
<span class="py-output">['12345', '1234', '123', '12', '1.2', '0.12', '0.012', '1.2e-3']</span>
</pre></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.pprint">
    
  </a>
  <a name="pprint">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">pprint</span>(to_be_printed):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>nicely formated print</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.print_message">
    
  </a>
  <a name="print_message">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">print_message</span>(msg, method_name=None, class_name=None, iteration=None, verbose=None):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.print_warning">
    
  </a>
  <a name="print_warning">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">print_warning</span>(msg, method_name=None, class_name=None, iteration=None, verbose=None, maxwarns=None):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>Poor man's maxwarns: warn only if <tt class="rst-docutils literal"><span class="pre">iteration&lt;=maxwarns</span></tt></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.ranks">
    
  </a>
  <a name="ranks">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">ranks</span>(a, reverse=False):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>return ranks of entries starting with zero based on Pythons <code>sorted</code>.</p>
<p>This leads to unreasonable results with <code>np.nan</code> values.</p>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.recycled">
    
  </a>
  <a name="recycled">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">recycled</span>(vec, dim=None, as_=None):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>return <tt class="rst-docutils literal">vec</tt> with the last element recycled to <tt class="rst-docutils literal">dim</tt> if
<tt class="rst-docutils literal">len(vec)</tt> doesn't fail, else <tt class="rst-docutils literal">vec</tt>.</p>
<p>If <tt class="rst-docutils literal">dim</tt> is not given, <tt class="rst-docutils literal">len(as_)</tt> is used if available, else a
scalar is returned.</p>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.rglen">
    
  </a>
  <a name="rglen">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">rglen</span>(ar):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>return generator <tt class="rst-docutils literal"><span class="pre">range(len(.))</span></tt> with shortcut <tt class="rst-docutils literal"><span class="pre">rglen(.)</span></tt></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.set_attributes_from_dict">
    
  </a>
  <a name="set_attributes_from_dict">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">set_attributes_from_dict</span>(self, dict_, initial_params_dict_name=None):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>assign, for example, all arguments given to an <tt class="rst-docutils literal">__init__</tt>
method to attributes in <tt class="rst-docutils literal">self</tt> or <tt class="rst-docutils literal">self.params</tt> or <tt class="rst-docutils literal">self.args</tt>.</p>
<p>If <tt class="rst-docutils literal">initial_params_dict_name</tt> is given, <tt class="rst-docutils literal">dict_</tt> is also copied
into an attribute of <tt class="rst-docutils literal">self</tt> with name <tt class="rst-docutils literal">initial_params_dict_name</tt>:</p>
<pre class="rst-literal-block">
setattr(self, initial_params_dict_name, dict_.copy())
</pre>
<p>and the <tt class="rst-docutils literal">self</tt> key is removed from the copied <code>dict</code> if present.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> cma.utilities.utils <span class="py-keyword">import</span> set_attributes_from_dict
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">class</span> <span class="py-defname">C</span>(<span class="py-builtin">object</span>):
<span class="py-more">... </span>    <span class="py-keyword">def</span> <span class="py-defname">__init__</span>(self, arg1, arg2, arg3=<span class="py-builtin">None</span>):
<span class="py-more">... </span>        <span class="py-keyword">assert</span> <span class="py-builtin">len</span>(<span class="py-builtin">locals</span>()) == 4  <span class="py-comment"># arguments are locally visible</span>
<span class="py-more">... </span>        set_attributes_from_dict(self, <span class="py-builtin">locals</span>())
<span class="py-prompt">&gt;&gt;&gt; </span>c = C(1, 22)
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">assert</span> c.arg1 == 1 <span class="py-keyword">and</span> c.arg2 == 22 <span class="py-keyword">and</span> c.arg3 <span class="py-keyword">is</span> <span class="py-builtin">None</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">assert</span> <span class="py-builtin">len</span>(c.__dict__) == 3 <span class="py-keyword">and</span> <span class="py-keyword">not</span> <span class="py-builtin">hasattr</span>(c, <span class="py-string">'self'</span>)</pre><p>Details:</p>
<ul>
<li><p class="rst-first">The entry <tt class="rst-docutils literal"><span class="pre">dict_['self']</span></tt> is always ignored.</p>
</li>
<li><p class="rst-first">Alternatively:</p>
<pre class="rst-literal-block">
self.args = locals().copy()
self.args.pop('self', None)  # not strictly necessary
</pre>
<p>puts all arguments into <tt class="rst-docutils literal">self.args: dict</tt>.</p>
</li>
</ul>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.seval">
    
  </a>
  <a name="seval">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">seval</span>(s, *args, **kwargs):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="cma.utilities.utils.zero_values_indices">
    
  </a>
  <a name="zero_values_indices">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">zero_values_indices</span>(diffs):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>generate increasing index pairs <tt class="rst-docutils literal">(i, j)</tt> with <tt class="rst-docutils literal">all(diffs[i:j] == 0)</tt></p>
<p>and <tt class="rst-docutils literal">diffs[j] != 0 or j == len(diffs)</tt>, thereby identifying "flat
spots/areas" in <code>diffs</code>.</p>
<p>Returns the respective generator type.</p>
<p>Not anymore used to smoothen ECDFs.</p>
<p>Example:</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> cma.utilities.utils <span class="py-keyword">import</span> zero_values_indices
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">for</span> i, j <span class="py-keyword">in</span> zero_values_indices([0, 0.1, 0, 0, 3.2, 0, 2.1]):
<span class="py-more">... </span>    <span class="py-builtin">print</span>((i, j))
<span class="py-output">(0, 1)</span>
<span class="py-output">(2, 4)</span>
<span class="py-output">(5, 6)</span>
</pre></div>
  </div>
</div><div class="baseconstant">
  
  
  <a name="cma.utilities.utils.PY2">
    
  </a>
  <a name="PY2">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">PY2</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>(sys.version_info[0] == 2)</code></pre></td></tr></table>
  </div>
</div><div class="basevariable">
  
  
  <a name="cma.utilities.utils.global_verbosity">
    
  </a>
  <a name="global_verbosity">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">global_verbosity</span>: <code>int</code> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for cma,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.2 at 2022-03-19 17:09:59.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>